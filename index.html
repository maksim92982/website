<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JANART STUDIO</title>
    <style>

        /* Стили для админ-панели */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 3000;
            padding: 100px 20px 20px;
            overflow-y: auto;
        }

        .admin-header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: #000;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 3001;
        }

        .admin-close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .admin-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
        }

        .admin-section h2 {
            margin-bottom: 15px;
            color: #333;
        }

        .admin-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .admin-input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .admin-btn {
            background: #000;
            color: white;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 16px;
        }

        .admin-btn:hover {
            background: #333;
        }

        .admin-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .painting-item {
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
        }

        .image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 10px 0;
        }

        .preview-img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 4px;
        }

        .upload-status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
        }

        .success {
            background: #d4edda;
            color: #155724;
        }

        .error {
            background: #f8d7da;
            color: #721c24;
        }

        .warning {
            background: #fff3cd;
            color: #856404;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 4px;
            margin-top: 10px;
        }

        .github-config {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #f0f0f0;
            border-radius: 10px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #007bff;
            transition: width 0.3s ease;
        }

        .config-status {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
        }
        /* Общие стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cormorant Garamond', serif;
        }
        
        body {
            color: #000;
            line-height: 1.6;
            background-color: #fff;
        }
        
        a {
            text-decoration: none;
            color: inherit;
        }
        
        /* Шапка */
        header {
            padding: 30px 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.95);
            transition: padding 0.3s ease;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 2px;
            font-family: 'Italiana', serif;
            cursor: pointer;
        }
        
        .logo:hover {
            opacity: 0.7;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 40px;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        nav ul li a:hover {
            opacity: 0.7;
        }
        
        /* Мобильное меню */
        .mobile-menu {
            display: none;
            cursor: pointer;
        }
        
        .mobile-nav {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transform: translateY(-100%);
            transition: transform 0.3s ease;
        }
        
        .mobile-nav.active {
            transform: translateY(0);
        }
        
        .close-menu {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
        }
        
        /* Главная страница */
        .main-content {
            margin-top: 120px;
            padding: 0 60px;
        }
        
        .hero-image {
            width: 100%;
            height: 70vh;
            cursor: pointer;
            overflow: hidden;
            position: relative;
        }
        
        .hero-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        /* Галерея */
        .gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 120px;
            padding: 0 60px;
            min-height: 200px;
        }
        
        .gallery-empty {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: #666;
            font-size: 18px;
        }
        
        .gallery-item {
            position: relative;
            overflow: hidden;
            cursor: pointer;
            height: 50vh;
            width: 100%;
        }
        
        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .gallery-item:hover img {
            transform: scale(1.03);
        }
        
        .gallery-item-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .gallery-item:hover .gallery-item-overlay {
            opacity: 1;
        }
        
        .product-title {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .product-price {
            font-size: 14px;
        }
        
        .product-photos-count {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .sold-out {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #000;
            color: #fff;
            padding: 5px 10px;
            font-size: 12px;
        }
        
        /* Страница товара */
        .product-page {
            display: none;
            padding: 120px 60px 60px;
        }
        
        .product-container {
            display: flex;
            flex-wrap: wrap;
            gap: 40px;
            justify-content: center;
        }
        
        .product-gallery {
            flex: 1;
            min-width: 300px;
            max-width: 75%;
            display: flex;
            flex-direction: row;
            align-items: flex-start;
            gap: 15px;
            position: relative;
        }
        
        .product-thumbnails {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 80px;
        }
        
        .product-thumbnail {
            width: 80px;
            height: 80px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s ease;
            border: 2px solid transparent;
        }
        
        .product-thumbnail:hover,
        .product-thumbnail.active {
            opacity: 1;
            border-color: #000;
        }
        
        .product-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .product-image-main {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            max-height: 65vh;
            position: relative;
            overflow: hidden;
            touch-action: pan-y;
        }
        
        .product-image-main img {
            max-width: 100%;
            max-height: 65vh;
            width: auto;
            height: auto;
            object-fit: contain;
            transition: transform 0.3s ease;
        }
        
        /* Стрелки навигации */
        .nav-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: background-color 0.3s ease;
            border: none;
        }
        
        .nav-arrow:hover {
            background: rgba(255, 255, 255, 0.95);
        }
        
        .nav-arrow.prev {
            left: 10px;
        }
        
        .nav-arrow.next {
            right: 10px;
        }
        
        .nav-arrow::before {
            content: '';
            width: 12px;
            height: 12px;
            border: 2px solid #000;
            border-width: 2px 2px 0 0;
            display: inline-block;
        }
        
        .nav-arrow.prev::before {
            transform: rotate(-135deg);
            margin-right: -2px;
        }
        
        .nav-arrow.next::before {
            transform: rotate(45deg);
            margin-left: -2px;
        }
        
        .product-details {
            flex: 1;
            min-width: 300px;
            max-width: 400px;
        }
        
        .back-button {
            display: inline-block;
            margin-bottom: 30px;
            font-size: 16px;
            cursor: pointer;
        }
        
        .back-button:hover {
            opacity: 0.7;
        }
        
        .add-to-cart {
            background: #000;
            color: #fff;
            border: none;
            padding: 15px 30px;
            margin-top: 20px;
            cursor: pointer;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .add-to-cart:hover {
            background: #333;
        }
        
        /* Биография */
        .bio-page {
            display: none;
            padding: 120px 60px 60px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .bio-page h1 {
            margin-bottom: 30px;
            font-size: 32px;
        }
        
        .bio-page p {
            margin-bottom: 20px;
            font-size: 18px;
            line-height: 1.8;
        }
        
        /* Контакты */
        .contact-page {
            display: none;
            padding: 120px 60px 60px;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .contact-page h1 {
            margin-bottom: 30px;
            font-size: 32px;
        }
        
        .contact-form {
            display: flex;
            flex-direction: column;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            font-size: 16px;
        }
        
        .form-group textarea {
            min-height: 150px;
        }
        
        .submit-button {
            background: #000;
            color: #fff;
            border: none;
            padding: 15px 30px;
            cursor: pointer;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            align-self: flex-start;
        }
        
        .submit-button:hover {
            background: #333;
        }
        
        /* Футер */
        footer {
            padding: 60px;
            background: #f7f7f7;
            margin-top: 60px;
            text-align: center;
        }
        
        .social-links {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .social-links a {
            font-size: 18px;
            padding: 12px 20px;
            transition: opacity 0.3s ease;
        }
        
        .social-links a:hover {
            opacity: 0.7;
        }
        
        /* Мобильная навигация */
        .mobile-gallery-link {
            display: none;
        }
        
        .mobile-bio-link {
            display: none;
        }
        
        /* Модальное окно контактов */
        .contacts-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .contacts-modal.active {
            display: flex;
        }
        
        .contacts-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            position: relative;
        }
        
        .close-contacts {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }
        
        /* Модальное окно редактирования описания картины */
        .description-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 4000;
            justify-content: center;
            align-items: center;
        }
        
        .description-modal.active {
            display: flex;
        }
        
        .description-content {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            text-align: left;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .close-description {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 24px;
            cursor: pointer;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .radio-group {
            display: flex;
            gap: 15px;
            margin-top: 5px;
        }
        
        .radio-group label {
            display: flex;
            align-items: center;
            font-weight: normal;
            cursor: pointer;
        }
        
        .radio-group input[type="radio"] {
            margin-right: 5px;
            width: auto;
        }
        
        .color-picker {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 5px;
        }
        
        .color-picker input[type="color"] {
            width: 50px;
            height: 40px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .color-presets {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        
        .color-preset {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }
        
        .color-preset:hover,
        .color-preset.active {
            border-color: #333;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 20px;
        }
        
        .modal-buttons .admin-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            font-size: 14px;
        }
        
        /* Стили для табличек на картинах */
        .painting-overlay {
            position: absolute;
            top: 10px;
            right: 10px;
            z-index: 10;
            padding: 8px 12px;
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            max-width: 80px;
            word-wrap: break-word;
        }
        
        .painting-overlay.rounded {
            border-radius: 15px;
        }
        
        .painting-overlay.square {
            border-radius: 4px;
        }
        
        .contact-item {
            margin: 15px 0;
            padding: 10px;
            border-bottom: 1px solid #eee;
            display: flex;
            flex-direction: column;
        }
        
        .contact-item:last-child {
            border-bottom: none;
        }
        
        .contact-item a {
            color: #000;
            transition: opacity 0.3s ease;
        }
        
        .contact-item a:hover {
            opacity: 0.7;
        }
        
        .contact-label {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        /* Адаптивность */
        @media (max-width: 1024px) {
            .gallery {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .gallery-item {
                height: 40vh;
            }
            
            .product-gallery {
                max-width: 85%;
            }
        }
        
        @media (max-width: 768px) {
            header {
                padding: 20px;
            }
            
            nav ul {
                display: none;
            }
            
            .mobile-menu {
                display: none;
            }
            
            .mobile-gallery-link {
                display: block;
                font-size: 16px;
                text-transform: uppercase;
                letter-spacing: 1px;
                cursor: pointer;
            }
            
            .mobile-gallery-link:hover {
                opacity: 0.7;
            }
            
            .main-content,
            .gallery,
            .product-page,
            .bio-page,
            .contact-page {
                padding-left: 20px;
                padding-right: 20px;
            }
            
            .hero-image {
                height: 50vh;
            }
            
            .gallery {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .gallery-item {
                height: 35vh;
            }
            
            .product-container {
                flex-direction: column;
                align-items: center;
            }
            
            .product-gallery {
                flex-direction: column;
                max-width: 100%;
                min-width: unset;
            }
            
            .product-thumbnails {
                flex-direction: row;
                flex-wrap: wrap;
                width: 100%;
                justify-content: center;
                order: 2;
            }
            
            .product-image-main {
                order: 1;
                max-height: 55vh;
                width: 100%;
            }
            
            .product-image-main img {
                max-height: 55vh;
            }
            
            .product-details {
                max-width: 100%;
            }
            
            .product-thumbnail {
                width: 60px;
                height: 60px;
            }
            
            /* Стрелки для мобильной версии */
            .nav-arrow {
                width: 35px;
                height: 35px;
            }
            
            .nav-arrow::before {
                width: 10px;
                height: 10px;
            }
            
            /* Мобильная версия футера */
            footer {
                padding: 40px 20px 20px; /* Уменьшен отступ снизу в 2 раза */
            }
            
            .social-links {
                flex-direction: row;
                gap: 15px;
                justify-content: space-around;
            }
            
            .social-links a {
                font-size: 16px;
                padding: 10px 15px;
                flex: 1;
                text-align: center;
            }
            
            .mobile-bio-link {
                display: block;
                font-size: 18px;
                padding: 12px 20px;
                margin-bottom: 20px;
                cursor: pointer;
            }
            
            .mobile-bio-link:hover {
                opacity: 0.7;
            }
            
            /* Скрываем стандартные ссылки в футере на мобильных */
            .social-links a:not(.mobile-contact-link) {
                display: none;
            }
            
            /* Показываем только две ссылки */
            .mobile-contact-link {
                display: block !important;
            }
        }
        
        @media (max-width: 480px) {
            .gallery-item {
                height: 30vh;
            }
            
            .product-image-main {
                max-height: 50vh;
            }
            
            .product-image-main img {
                max-height: 50vh;
            }
            
            .product-thumbnail {
                width: 50px;
                height: 50px;
            }
            
            .nav-arrow {
                width: 30px;
                height: 30px;
            }
            
            .nav-arrow::before {
                width: 8px;
                height: 8px;
            }
            
            .nav-arrow.prev {
                left: 5px;
            }
            
            .nav-arrow.next {
                right: 5px;
            }
            
            /* Еще больше уменьшаем отступ в футере для мобильных */
            footer {
                padding: 30px 15px 15px;
            }
        }

        /* Стили для десктопной версии контактов */
        @media (min-width: 769px) {
            /* Скрываем кнопку "Контакты" в футере на десктопе */
            .social-links a.mobile-contact-link {
                display: none;
            }
            
            /* Стили для модального окна контактов на десктопе */
            .contacts-content {
                text-align: left;
                max-width: 500px;
            }
            
            .contact-item {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            
            .contact-label {
                min-width: 100px;
                margin-bottom: 0;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,500;0,700;1,300;1,700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Italiana&display=swap" rel="stylesheet">
</head>
<body><!-- Панель администратора -->
    <div id="admin-panel" class="admin-panel">
        <div class="admin-header">
            <h2>Панель администратора JANART STUDIO</h2>
            <button class="admin-close" id="admin-close">✕</button>
        </div>
        
        <div class="github-config">
            <h3>Настройки GitHub</h3>
            <div class="admin-form">
                <input type="password" id="github-token" class="admin-input" placeholder="GitHub Personal Access Token" value="">
                <input type="text" id="github-owner" class="admin-input" placeholder="Владелец репозитория (username)" value="maksim92982">
                <input type="text" id="github-repo" class="admin-input" placeholder="Название репозитория" value="website">
                <input type="text" id="github-path" class="admin-input" placeholder="Путь к папке" value="images/gallery">
                <div id="config-status" class="config-status"></div>
                <button class="admin-btn" id="save-github-config">Сохранить настройки GitHub</button>
                <button class="admin-btn" id="test-connection">Проверить подключение</button>
            </div>
        </div>

        <div class="admin-section">
            <h2>Настройки галереи</h2>
            <div class="admin-form">
                <label>Количество картин в галерее:</label>
                <input type="number" id="paintings-count" class="admin-input" min="1" value="3">
                <button class="admin-btn" id="save-settings">Сохранить настройки</button>
            </div>
        </div>

        <div class="admin-section">
            <h2>Управление фотографиями картин</h2>
            <div id="paintings-photos-config">
                <!-- Конфигурация будет генерироваться здесь -->
            </div>
            <button class="admin-btn" id="save-photos-config">Сохранить конфигурацию фотографий</button>
        </div>

        <div class="admin-section">
            <h2>Изменение порядка картин в галерее</h2>
            <div style="margin-bottom: 15px; padding: 10px; background: #e9ecef; border-radius: 5px;">
                <strong>Изменение порядка картин:</strong>
                <div style="margin-top: 10px;">
                    <button class="admin-btn" onclick="moveSelectedPainting('up')" style="margin-right: 10px; padding: 5px 15px; font-size: 12px;">↑ Вверх</button>
                    <button class="admin-btn" onclick="moveSelectedPainting('down')" style="padding: 5px 15px; font-size: 12px;">↓ Вниз</button>
                </div>
            </div>
            <div id="paintings-order-config">
                <!-- Список картин для изменения порядка будет генерироваться здесь -->
            </div>
        </div>

        <div class="admin-section">
            <h2>Добавить новую картину</h2>
            <div class="admin-form">
                <input type="text" id="painting-title" class="admin-input" placeholder="Название картины">
                <input type="text" id="painting-size" class="admin-input" placeholder="Размер (например: 36x48)">
                <input type="text" id="painting-price" class="admin-input" placeholder="Цена">
                <textarea id="painting-description" class="admin-input" placeholder="Описание" rows="3"></textarea>
                
                <label>Загрузите фотографии для этой картины (первая будет основной):</label>
                <input type="file" id="painting-images" class="admin-input" multiple accept="image/*,.heic,.heif">
                
                <div class="image-preview" id="image-preview"></div>
                <div class="progress-bar" id="upload-progress" style="display: none;">
                    <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
                </div>
                <div id="upload-status" class="upload-status"></div>
                
                <button class="admin-btn" id="add-painting">Добавить картину в GitHub</button>
            </div>
        </div>

        <div class="admin-section">
            <h2>Управление существующими картинами</h2>
            <div id="paintings-list">
                <!-- Список картин будет генерироваться здесь -->
            </div>
        </div>
    </div>
    <!-- Шапка -->
    <header>
        <div class="logo" id="home-logo">JANART STUDIO</div>
        <nav>
            <ul>
                <li><a href="#" class="nav-link" data-page="gallery">Галерея</a></li>
                <li><a href="#" class="nav-link" data-page="bio">Об авторе</a></li>
                <li><a href="#" class="nav-link" id="desktop-contacts-link">Контакты</a></li>
            </ul>
        </nav>
        <div class="mobile-gallery-link" data-page="gallery">Галерея</div>
        <div class="mobile-menu">Меню</div>
    </header>

    <!-- Мобильное меню (добавлено в HTML) -->
    <div class="mobile-nav">
        <div class="close-menu">✕</div>
        <ul>
            <li><a href="#" class="nav-link" data-page="home">Главная</a></li>
            <li><a href="#" class="nav-link" data-page="gallery">Галерея</a></li>
            <li><a href="#" class="nav-link" data-page="bio">Об авторе</a></li>
            <li><a href="#" class="nav-link" id="mobile-contacts-link">Контакты</a></li>
        </ul>
    </div>

    <!-- Главная страница -->
    <div id="home-page" class="page">
        <div class="main-content">
            <div class="hero-image">
                <img src="images/freepik-export-20241021134528sZDq.jpeg" alt="Главное изображение JANART STUDIO" id="main-hero">
            </div>
        </div>
    </div>

    <!-- Галерея -->
    <div id="gallery-page" class="page" style="display: none;">
        <div class="gallery">
            <!-- Элементы галереи будут добавлены через JavaScript -->
        </div>
    </div>

    <!-- Страница товара -->
    <div id="product-page" class="product-page">
        <!-- Контент будет добавляться через JavaScript -->
    </div>

    <!-- Биография -->
    <div id="bio-page" class="bio-page">
        <h1>Об авторе</h1>
        <p>Я - современный художник, вдохновленный красотой окружающего мира и внутренними переживаниями. Мои работы отражают взаимодействие цвета, формы и текстуры, создавая уникальные визуальные narratives.</p>
        <p>Я работаю с различными медиа, включая акрил, масло и смешанную технику. Каждая картина - это исследование и выражение эмоций, зафиксированных на холсте.</p>
        <p>Мое искусство - это диалог со зрителем, приглашение к размышлению и эмоциональному отклику. Я стремлюсь создавать работы, которые resonate с людьми на глубоком уровне.</p>
        <p>Мои произведения находятся в частных коллекциях по всему миру и были представлены на нескольких выставках.</p>
    </div>

    <!-- Контакты -->
    <div id="contact-page" class="contact-page">
        <h1>Свяжитесь со мной</h1>
        <form class="contact-form">
            <div class="form-group">
                <label for="name">Имя</label>
                <input type="text" id="name" required>
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" id="email" required>
            </div>
            <div class="form-group">
                <label for="message">Сообщение</label>
                <textarea id="message" required></textarea>
            </div>
            <button type="submit" class="submit-button">Отправить</button>
        </form>
    </div>

    <!-- Футер -->
    <footer>
        <div class="mobile-bio-link" data-page="bio">Об авторе</div>
        <div class="social-links">
            <a href="#" class="mobile-contact-link" id="contacts-link">Контакты</a>
            <a href="https://www.instagram.com/janart_studio/" target="_blank">Instagram</a>
            <a href="https://wa.me/79046006365" target="_blank">WhatsApp</a>
        </div>
    </footer>

    <!-- Модальное окно контактов -->
    <div class="contacts-modal" id="contacts-modal">
        <div class="contacts-content">
            <div class="close-contacts" id="close-contacts">✕</div>
            <h2>Контакты</h2>
            <div class="contact-item">
                <span class="contact-label">Instagram</span>
                <a href="https://www.instagram.com/janart_studio/" target="_blank">@janart_studio</a>
            </div>
            <div class="contact-item">
                <span class="contact-label">WhatsApp</span>
                <a href="https://wa.me/79046068107" target="_blank">+7 (904) 606 81 07</a>
            </div>
            <div class="contact-item">
                <span class="contact-label">Email</span>
                <a href="mailto:tatiana.janart@gmail.com">tatiana.janart@gmail.com</a>
            </div>
        </div>
    </div>

    <!-- Модальное окно редактирования описания картины -->
    <div class="description-modal" id="description-modal">
        <div class="description-content">
            <div class="close-description" id="close-description">✕</div>
            <h2>Редактирование описания картины</h2>
            
            <div class="form-group">
                <label for="painting-title">Название картины:</label>
                <input type="text" id="painting-title" placeholder="Введите название картины">
            </div>
            
            <div class="form-group">
                <label for="painting-price">Цена:</label>
                <input type="text" id="painting-price" placeholder="Введите цену">
            </div>
            
            <div class="form-group">
                <label for="painting-size">Размер:</label>
                <input type="text" id="painting-size" placeholder="Введите размер">
            </div>
            
            <div class="form-group">
                <label for="painting-description">Описание:</label>
                <textarea id="painting-description" rows="4" placeholder="Введите описание картины"></textarea>
            </div>
            
            <div class="form-group">
                <label>Форма таблички:</label>
                <div class="radio-group">
                    <label><input type="radio" name="shape-type" value="none" checked> Нет</label>
                    <label><input type="radio" name="shape-type" value="rounded"> Скругленный</label>
                    <label><input type="radio" name="shape-type" value="square"> Квадратный</label>
                </div>
            </div>
            
            <div class="form-group" id="overlay-settings" style="display: none;">
                <label for="overlay-text">Текст на табличке:</label>
                <input type="text" id="overlay-text" placeholder="Введите текст для таблички">
                
                <label for="overlay-color">Цвет таблички:</label>
                <div class="color-picker">
                    <input type="color" id="overlay-color" value="#ff6b6b">
                    <div class="color-presets">
                        <div class="color-preset" style="background: #ff6b6b;" data-color="#ff6b6b"></div>
                        <div class="color-preset" style="background: #4ecdc4;" data-color="#4ecdc4"></div>
                        <div class="color-preset" style="background: #45b7d1;" data-color="#45b7d1"></div>
                        <div class="color-preset" style="background: #96ceb4;" data-color="#96ceb4"></div>
                        <div class="color-preset" style="background: #feca57;" data-color="#feca57"></div>
                        <div class="color-preset" style="background: #ff9ff3;" data-color="#ff9ff3"></div>
                        <div class="color-preset" style="background: #54a0ff;" data-color="#54a0ff"></div>
                        <div class="color-preset" style="background: #5f27cd;" data-color="#5f27cd"></div>
                    </div>
                </div>
            </div>
            
            <div class="modal-buttons">
                <button class="admin-btn" id="save-description" style="background: #28a745;">Сохранить</button>
                <button class="admin-btn" id="cancel-description" style="background: #6c757d;">Отмена</button>
            </div>
        </div>
    </div>

    <script>
        // =====  GITHUB =====
        const GITHUB_CONFIG = {
            token: localStorage.getItem('github_token') || '',
            owner: localStorage.getItem('github_owner') || 'maksim92982',
            repo: localStorage.getItem('github_repo') || 'website',
            path: localStorage.getItem('github_path') || 'images/gallery'
        };

        // ===== ОСНОВНЫЕ ПЕРЕМЕННЫЕ =====
        let galleryItems = [];
        let currentProduct = null;
        let currentImageIndex = 0;
        let touchStartX = 0;
        let touchEndX = 0;
        let numberOfPaintings = 3; // Количество картин по умолчанию
        let photosPerPainting = 1; // Количество фото на картину по умолчанию

        // ===== ФУНКЦИИ ДЛЯ РАБОТЫ С GITHUB API =====

        // Получить информацию о файле в GitHub (для получения SHA)
        async function getFileInfo(path) {
            try {
                const response = await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${path}`, {
                    headers: {
                        'Authorization': `token ${GITHUB_CONFIG.token}`
                    }
                });
                
                if (response.ok) {
                    return await response.json();
                } else if (response.status === 404) {
                    return null; // Файл не существует
                } else {
                    throw new Error(`Ошибка получения информации о файле: ${response.status}`);
                }
            } catch (error) {
                console.error('Ошибка получения информации о файле:', error);
                return null;
            }
        }

        // Загрузка изображения в GitHub
        async function uploadImageToGitHub(file, paintingId, imageNumber) {
            const statusDiv = document.getElementById('upload-status');
            
            try {
                // Определяем расширение файла (поддерживаем все форматы)
                const fileExtension = getFileExtension(file.name);
                const filename = `${imageNumber}.${fileExtension}`;
                const path = `${GITHUB_CONFIG.path}/${paintingId}/${filename}`;
                
                // Конвертируем файл в base64
                const base64Content = await fileToBase64(file);
                
                // Получаем информацию о существующем файле (для SHA)
                const existingFile = await getFileInfo(path);
                
                // Формируем данные для запроса
                const requestData = {
                    message: `Add/Update image for painting ${paintingId}`,
                    content: base64Content.split(',')[1] // Убираем префикс data:image/...;base64,
                };
                
                // Если файл уже существует, добавляем SHA
                if (existingFile && existingFile.sha) {
                    requestData.sha = existingFile.sha;
                }
                
                // Формируем запрос к GitHub API
                const response = await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${path}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${GITHUB_CONFIG.token}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(errorData.message || `Ошибка загрузки: ${response.status}`);
                }
                
                const data = await response.json();
                
                // Формируем raw URL для изображения
                const rawUrl = data.content.download_url;
                
                return rawUrl;
                
            } catch (error) {
                console.error('Ошибка загрузки в GitHub:', error);
                if (statusDiv) {
                    statusDiv.textContent = `Ошибка: ${error.message}`;
                    statusDiv.className = 'upload-status error';
                }
                throw error;
            }
        }

        // Получить расширение файла (поддерживаем все форматы)
        function getFileExtension(filename) {
            const ext = filename.split('.').pop().toLowerCase();
            
            // Поддерживаемые форматы изображений
            const supportedFormats = ['jpg', 'jpeg', 'png', 'gif', 'bmp', 'webp', 'heic', 'heif', 'tiff', 'svg'];
            
            // Если расширение поддерживается, возвращаем его
            if (supportedFormats.includes(ext)) {
                return ext;
            }
            
            // Если расширение не поддерживается, конвертируем в jpg
            return 'jpg';
        }

        // Конвертация файла в base64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }

        // Проверка подключения к GitHub
        async function testGitHubConnection() {
            const statusDiv = document.getElementById('config-status');
            const testBtn = document.getElementById('test-connection');
            
            try {
                testBtn.disabled = true;
                statusDiv.textContent = 'Проверяем подключение...';
                statusDiv.className = 'config-status warning';
                
                const response = await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}`, {
                    headers: {
                        'Authorization': `token ${GITHUB_CONFIG.token}`
                    }
                });
                
                if (response.ok) {
                    statusDiv.textContent = '✅ Подключение успешно! Репозиторий доступен.';
                    statusDiv.className = 'config-status success';
                } else {
                    throw new Error(`Ошибка: ${response.status} ${response.statusText}`);
                }
            } catch (error) {
                statusDiv.textContent = `❌ Ошибка подключения: ${error.message}`;
                statusDiv.className = 'config-status error';
            } finally {
                testBtn.disabled = false;
            }
        }

        // ===== ФУНКЦИИ АДМИН-ПАНЕЛИ =====

        // Проверяем, является ли текущий URL админским
        function checkAdminURL() {
            const currentPath = window.location.pathname;
            const currentHash = window.location.hash;
            
            // Проверяем URL вида janart-studio.ru/admin12345 или localhost:8080/admin12345
            if (currentPath.includes('/admin12345') || currentHash === '#admin12345') {
                showAdminPanel();
            }
        }

        // Показать панель администратора
        function showAdminPanel() {
            const adminPanel = document.getElementById('admin-panel');
            if (adminPanel) {
                adminPanel.style.display = 'block';
                loadPaintingsList();
                loadGithubConfig();
                generatePhotosConfig();
            }
        }

        // Загрузить настройки GitHub
        function loadGithubConfig() {
            document.getElementById('github-token').value = GITHUB_CONFIG.token;
            document.getElementById('github-owner').value = GITHUB_CONFIG.owner;
            document.getElementById('github-repo').value = GITHUB_CONFIG.repo;
            document.getElementById('github-path').value = GITHUB_CONFIG.path;
        }

        // Сохранить настройки GitHub
        function saveGithubConfig() {
            GITHUB_CONFIG.token = document.getElementById('github-token').value;
            GITHUB_CONFIG.owner = document.getElementById('github-owner').value;
            GITHUB_CONFIG.repo = document.getElementById('github-repo').value;
            GITHUB_CONFIG.path = document.getElementById('github-path').value;
            
            // Сохраняем в localStorage
            localStorage.setItem('github_token', GITHUB_CONFIG.token);
            localStorage.setItem('github_owner', GITHUB_CONFIG.owner);
            localStorage.setItem('github_repo', GITHUB_CONFIG.repo);
            localStorage.setItem('github_path', GITHUB_CONFIG.path);
            
            const statusDiv = document.getElementById('config-status');
            statusDiv.textContent = '✅ Настройки GitHub сохранены!';
            statusDiv.className = 'config-status success';
        }

        // Сохранить настройки количества картин
        async function savePaintingsSettings() {
            const count = parseInt(document.getElementById('paintings-count').value);
            if (count && count > 0) {
                numberOfPaintings = count;
                localStorage.setItem('numberOfPaintings', numberOfPaintings);
                
                // Создаем недостающие картины
                await createMissingPaintings();
                
                // Обновляем конфигурацию фотографий
                generatePhotosConfig();
                
                // Генерируем конфигурацию порядка картин
                generatePaintingsOrderConfig();
                
                // Обновляем галерею
                initGallery();
                
                alert(`Настройки сохранены! Количество картин: ${count}`);
            } else {
                alert('Введите корректное количество картин');
            }
        }

        // Создать недостающие картины
        async function createMissingPaintings() {
            // Создаем картины, которых еще нет
            for (let i = 1; i <= numberOfPaintings; i++) {
                const paintingIndex = i - 1;
                
                // Если картины еще нет, создаем ее
                if (!galleryItems[paintingIndex]) {
                    const newPainting = {
                        id: i,
                        title: `Без названия, №${i}`,
                        size: i % 2 === 0 ? '36" x 48"' : '48" x 36"',
                        price: i === 5 ? "2 160 ₽" : "3 450 ₽",
                        mainImage: '', // Пустое изображение
                        images: [], // Пустой массив изображений
                        soldOut: false,
                        description: "Акрил, мраморная пыль и пигмент на холсте, 2024"
                    };
                    
                    galleryItems[paintingIndex] = newPainting;
                }
            }
            
            // Удаляем лишние картины, если количество уменьшилось
            if (galleryItems.length > numberOfPaintings) {
                galleryItems.splice(numberOfPaintings);
            }
            
            // Сохраняем изменения
            await saveGalleryDataComplete();
        }

        // Генерировать конфигурацию фотографий для картин
        function generatePhotosConfig() {
            const container = document.getElementById('paintings-photos-config');
            if (!container) return;
            
            container.innerHTML = '';
            
            for (let i = 1; i <= numberOfPaintings; i++) {
                const paintingIndex = i - 1;
                const currentPainting = galleryItems[paintingIndex];
                const currentPhotosCount = currentPainting && currentPainting.images ? currentPainting.images.length : 0;
                
                const paintingDiv = document.createElement('div');
                paintingDiv.className = 'painting-photos-config';
                paintingDiv.style.cssText = 'margin-bottom: 20px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9;';
                
                paintingDiv.innerHTML = `
                    <h4>Картина №${i} ${currentPainting ? `"${currentPainting.title}"` : ''}</h4>
                    <div style="margin-bottom: 15px;">
                        <strong>Текущее количество фотографий: <span id="current-photos-count-${i}" style="color: #007bff;">${currentPhotosCount}</span></strong>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <button class="admin-btn" id="add-photos-btn-${i}" style="margin-right: 10px;">Добавить фотографии</button>
                        <button class="admin-btn" id="manage-photos-btn-${i}" style="background: #28a745; margin-right: 10px;">Управлять фотографиями</button>
                        <button class="admin-btn" id="delete-painting-btn-${i}" style="background: #dc3545; margin-right: 10px;">Удалить картину</button>
                        <button class="admin-btn" id="move-painting-up-btn-${i}" style="background: #17a2b8; margin-right: 5px; padding: 5px 10px; font-size: 12px;">↑ Вверх</button>
                        <button class="admin-btn" id="move-painting-down-btn-${i}" style="background: #17a2b8; margin-right: 10px; padding: 5px 10px; font-size: 12px;">↓ Вниз</button>
                    </div>
                    <div id="photos-preview-${i}" class="image-preview" style="margin-top: 10px;"></div>
                    <div id="photos-management-${i}" style="display: none; margin-top: 15px; padding: 15px; background: white; border-radius: 5px; border: 1px solid #ccc;">
                        <h5>Управление фотографиями:</h5>
                        <div id="photos-list-${i}"></div>
                    </div>
                `;
                
                container.appendChild(paintingDiv);
            }
            
            // Добавляем обработчики для кнопок
            for (let i = 1; i <= numberOfPaintings; i++) {
                const addBtn = document.getElementById(`add-photos-btn-${i}`);
                const manageBtn = document.getElementById(`manage-photos-btn-${i}`);
                const moveUpBtn = document.getElementById(`move-painting-up-btn-${i}`);
                const moveDownBtn = document.getElementById(`move-painting-down-btn-${i}`);
                const deleteBtn = document.getElementById(`delete-painting-btn-${i}`);
                
                if (addBtn) {
                    addBtn.addEventListener('click', function() {
                        addPhotosForPainting(i);
                    });
                }
                
                if (manageBtn) {
                    manageBtn.addEventListener('click', function() {
                        togglePhotosManagement(i);
                    });
                }
                
                if (moveUpBtn) {
                    moveUpBtn.addEventListener('click', function() {
                        movePaintingInList(i - 1, 'up');
                    });
                }
                
                if (moveDownBtn) {
                    moveDownBtn.addEventListener('click', function() {
                        movePaintingInList(i - 1, 'down');
                    });
                }
                
                if (deleteBtn) {
                    deleteBtn.addEventListener('click', function() {
                        deletePainting(i - 1);
                    });
                }
            }
        }

        // Переключить отображение управления фотографиями
        function togglePhotosManagement(paintingNumber) {
            const managementDiv = document.getElementById(`photos-management-${paintingNumber}`);
            const photosListDiv = document.getElementById(`photos-list-${paintingNumber}`);
            
            if (managementDiv.style.display === 'none') {
                managementDiv.style.display = 'block';
                loadPhotosList(paintingNumber);
            } else {
                managementDiv.style.display = 'none';
            }
        }

        // Загрузить список фотографий для управления
        function loadPhotosList(paintingNumber) {
            const photosListDiv = document.getElementById(`photos-list-${paintingNumber}`);
            const paintingIndex = paintingNumber - 1;
            const painting = galleryItems[paintingIndex];
            
            if (!painting || !painting.images || painting.images.length === 0) {
                photosListDiv.innerHTML = '<p>У этой картины нет фотографий. Добавьте фотографии, нажав кнопку "Добавить фотографии".</p>';
                return;
            }
            
            photosListDiv.innerHTML = `
                <div style="margin-bottom: 15px; padding: 10px; background: #e9ecef; border-radius: 5px;">
                    <strong>Изменение порядка фотографий:</strong>
                    <div style="margin-top: 10px;">
                        <button class="admin-btn" onclick="moveSelectedPhoto(${paintingNumber}, 'up')" style="margin-right: 10px; padding: 5px 15px; font-size: 12px;">↑ Вверх</button>
                        <button class="admin-btn" onclick="moveSelectedPhoto(${paintingNumber}, 'down')" style="padding: 5px 15px; font-size: 12px;">↓ Вниз</button>
                    </div>
                </div>
            `;
            
            painting.images.forEach((imageUrl, index) => {
                const photoDiv = document.createElement('div');
                photoDiv.style.cssText = 'display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background: white;';
                
                photoDiv.innerHTML = `
                    <input type="radio" name="photo-${paintingNumber}" value="${index}" style="margin-right: 15px;">
                    <img src="${imageUrl}" style="width: 60px; height: 60px; object-fit: cover; margin-right: 15px; border-radius: 4px;">
                    <div style="flex: 1;">
                        <div><strong>Фотография №${index + 1}</strong></div>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">${imageUrl.split('/').pop()}</div>
                    </div>
                    <button class="admin-btn" onclick="deletePhoto(${paintingNumber}, ${index})" style="background: #dc3545; padding: 5px 10px; font-size: 12px;">Удалить</button>
                `;
                
                photosListDiv.appendChild(photoDiv);
            });
        }

        // Удалить конкретную фотографию
        async function deletePhoto(paintingNumber, photoIndex) {
            const paintingIndex = paintingNumber - 1;
            const painting = galleryItems[paintingIndex];
            
            if (!painting || !painting.images || painting.images.length === 0) {
                return;
            }
            
            if (confirm(`Удалить фотографию №${photoIndex + 1}?`)) {
                // Удаляем фотографию из массива
                painting.images.splice(photoIndex, 1);
                
                // Если фотографий не осталось, удаляем картину
                if (painting.images.length === 0) {
                    galleryItems.splice(paintingIndex, 1);
                    alert('У картины не осталось фотографий. Картина удалена из галереи.');
                } else {
                    // Обновляем главное изображение
                    painting.mainImage = painting.images[0];
                }
                
                // Сохраняем изменения
                await saveGalleryDataComplete();
                
                // Обновляем галерею
                initGallery();
                
                // Обновляем конфигурацию
                generatePhotosConfig();
                
                // Генерируем конфигурацию порядка картин
                generatePaintingsOrderConfig();
                
                alert('Фотография удалена!');
            }
        }

        // Переместить выбранную фотографию
        function moveSelectedPhoto(paintingNumber, direction) {
            const paintingIndex = paintingNumber - 1;
            const painting = galleryItems[paintingIndex];
            
            if (!painting || !painting.images) {
                alert('Картина не найдена');
                return;
            }
            
            // Получаем выбранную фотографию
            const selectedRadio = document.querySelector(`input[name="photo-${paintingNumber}"]:checked`);
            if (!selectedRadio) {
                alert('Выберите фотографию для перемещения');
                return;
            }
            
            const selectedIndex = parseInt(selectedRadio.value);
            const newIndex = direction === 'up' ? selectedIndex - 1 : selectedIndex + 1;
            
            // Проверяем границы
            if (newIndex < 0 || newIndex >= painting.images.length) {
                alert(`Нельзя переместить фотографию ${direction === 'up' ? 'вверх' : 'вниз'}`);
                return;
            }
            
            // Перемещаем фотографию
            const imageToMove = painting.images[selectedIndex];
            painting.images.splice(selectedIndex, 1);
            painting.images.splice(newIndex, 0, imageToMove);
            
            // Обновляем главное изображение, если переместили первую фотографию
            if (selectedIndex === 0 || newIndex === 0) {
                painting.mainImage = painting.images[0];
            }
            
            // Сохраняем изменения
            saveGalleryData();
            
            // Обновляем галерею
            initGallery();
            
            // Перезагружаем список фотографий
            loadPhotosList(paintingNumber);
            
            // Восстанавливаем выделение на новой позиции
            setTimeout(() => {
                const newRadio = document.querySelector(`input[name="photo-${paintingNumber}"][value="${newIndex}"]`);
                if (newRadio) {
                    newRadio.checked = true;
                }
            }, 100);
        }

        // Удалить картину
        async function deletePainting(paintingIndex) {
            const painting = galleryItems[paintingIndex];
            
            if (!painting) {
                alert('Картина не найдена');
                return;
            }
            
            if (confirm(`Удалить картину "${painting.title}"?`)) {
                galleryItems.splice(paintingIndex, 1);
                await saveGalleryDataComplete();
                initGallery();
                generatePhotosConfig();
                generatePaintingsOrderConfig();
                alert('Картина удалена!');
            }
        }

        // Добавить фотографии для конкретной картины
        function addPhotosForPainting(paintingNumber) {
            const input = document.createElement('input');
            input.type = 'file';
            input.multiple = true;
            input.accept = 'image/*,.heic,.heif';
            
            input.addEventListener('change', async function() {
                if (this.files && this.files.length > 0) {
                    await uploadPhotosForPainting(paintingNumber, this.files);
                }
            });
            
            input.click();
        }

        // Загрузить фотографии для картины в GitHub
        async function uploadPhotosForPainting(paintingNumber, files) {
            const statusDiv = document.getElementById(`photos-preview-${paintingNumber}`);
            const addBtn = document.getElementById(`add-photos-btn-${paintingNumber}`);
            
            if (!GITHUB_CONFIG.token) {
                statusDiv.innerHTML = '<div class="error">Сначала настройте GitHub токен</div>';
                return;
            }
            
            addBtn.disabled = true;
            statusDiv.innerHTML = '<div class="warning">Загружаем фотографии...</div>';
            
            try {
                const imageUrls = [];
                let successCount = 0;
                
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    try {
                        const imageUrl = await uploadImageToGitHub(file, paintingNumber, i + 1);
                        imageUrls.push(imageUrl);
                        successCount++;
                        
                        // Обновляем статус
                        statusDiv.innerHTML = `<div class="warning">Загружаем фотографии... (${successCount}/${files.length})</div>`;
                    } catch (error) {
                        console.error(`Ошибка загрузки файла ${file.name}:`, error);
                        // Продолжаем загрузку других файлов
                    }
                }
                
                if (successCount > 0) {
                    // Обновляем картину в галерее
                    const paintingIndex = paintingNumber - 1;
                    
                    // Если картины еще нет, создаем ее
                    if (!galleryItems[paintingIndex]) {
                        galleryItems[paintingIndex] = {
                            id: paintingNumber,
                            title: `Без названия, №${paintingNumber}`,
                            size: paintingNumber % 2 === 0 ? '36" x 48"' : '48" x 36"',
                            price: paintingNumber === 5 ? "2 160 ₽" : "3 450 ₽",
                            mainImage: '',
                            images: [],
                            soldOut: false,
                            description: "Акрил, мраморная пыль и пигмент на холсте, 2024"
                        };
                    }
                    
                    // Объединяем существующие изображения с новыми
                    const existingImages = galleryItems[paintingIndex].images || [];
                    galleryItems[paintingIndex].images = [...existingImages, ...imageUrls];
                    galleryItems[paintingIndex].mainImage = galleryItems[paintingIndex].images[0];
                    await saveGalleryDataComplete();
                    initGallery(); // Перезагружаем галерею
                    
                    // Обновляем конфигурацию
                    generatePhotosConfig();
                    
                    // Генерируем конфигурацию порядка картин
                    generatePaintingsOrderConfig();
                    
                    statusDiv.innerHTML = `<div class="success">✅ Загружено ${successCount} из ${files.length} фотографий для картины №${paintingNumber}. Теперь у картины ${galleryItems[paintingIndex].images.length} фотографий.</div>`;
                } else {
                    statusDiv.innerHTML = `<div class="error">❌ Не удалось загрузить ни одной фотографии</div>`;
                }
                
            } catch (error) {
                statusDiv.innerHTML = `<div class="error">❌ Ошибка: ${error.message}</div>`;
            } finally {
                addBtn.disabled = false;
            }
        }

        // Добавить новую картину с загрузкой в GitHub
        async function addNewPainting() {
            const title = document.getElementById('painting-title').value;
            const size = document.getElementById('painting-size').value;
            const price = document.getElementById('painting-price').value;
            const description = document.getElementById('painting-description').value;
            const imageInput = document.getElementById('painting-images');
            const statusDiv = document.getElementById('upload-status');
            const addButton = document.getElementById('add-painting');
            const progressBar = document.getElementById('upload-progress');
            
            // Проверяем настройки GitHub
            if (!GITHUB_CONFIG.token || !GITHUB_CONFIG.owner || !GITHUB_CONFIG.repo) {
                statusDiv.textContent = 'Сначала настройте подключение к GitHub';
                statusDiv.className = 'upload-status error';
                return;
            }
            
            // Проверяем заполненность полей
            if (!title || !size || !price || !description) {
                statusDiv.textContent = 'Заполните все поля';
                statusDiv.className = 'upload-status error';
                return;
            }
            
            if (!imageInput.files || imageInput.files.length === 0) {
                statusDiv.textContent = 'Добавьте хотя бы одно изображение';
                statusDiv.className = 'upload-status error';
                return;
            }
            
            // Блокируем кнопку во время загрузки
            addButton.disabled = true;
            statusDiv.textContent = 'Начинаем загрузку...';
            statusDiv.className = 'upload-status warning';
            progressBar.style.display = 'block';
            
            try {
                // Генерируем ID для новой картины
                const paintingId = Date.now(); // Используем timestamp для уникальности
                const imageUrls = [];
                
                // Загружаем каждое изображение
                let successCount = 0;
                for (let i = 0; i < imageInput.files.length; i++) {
                    const file = imageInput.files[i];
                    
                    try {
                        // Обновляем прогресс
                        const progress = Math.round((i / imageInput.files.length) * 100);
                        document.getElementById('progress-fill').style.width = `${progress}%`;
                        statusDiv.textContent = `Загружаем изображение ${i + 1} из ${imageInput.files.length}`;
                        
                        // Загружаем изображение в GitHub
                        const imageUrl = await uploadImageToGitHub(file, paintingId, i + 1);
                        imageUrls.push(imageUrl);
                        successCount++;
                    } catch (error) {
                        console.error(`Ошибка загрузки файла ${file.name}:`, error);
                        // Продолжаем загрузку других файлов
                    }
                }
                
                if (successCount === 0) {
                    throw new Error('Не удалось загрузить ни одного изображения');
                }
                
                // Полный прогресс
                document.getElementById('progress-fill').style.width = '100%';
                
                // Создаем новый элемент галереи
                const newItem = {
                    id: paintingId,
                    title: title,
                    size: size,
                    price: price,
                    mainImage: imageUrls[0],
                    images: imageUrls,
                    soldOut: false,
                    description: description
                };
                
                // Добавляем в массив
                galleryItems.push(newItem);
                
                // Сохраняем в localStorage
                saveGalleryData();
                
                // Обновляем галерею
                initGallery();
                
                // Очищаем форму
                document.getElementById('painting-title').value = '';
                document.getElementById('painting-size').value = '';
                document.getElementById('painting-price').value = '';
                document.getElementById('painting-description').value = '';
                document.getElementById('image-preview').innerHTML = '';
                imageInput.value = '';
                progressBar.style.display = 'none';
                
                // Показываем сообщение об успехе
                statusDiv.textContent = `✅ Картина успешно добавлена! Загружено ${successCount} из ${imageInput.files.length} изображений в GitHub.`;
                statusDiv.className = 'upload-status success';
                
                // Обновляем список картин
                loadPaintingsList();
                
            } catch (error) {
                console.error('Ошибка добавления картины:', error);
                statusDiv.textContent = `❌ Ошибка: ${error.message}`;
                statusDiv.className = 'upload-status error';
            } finally {
                // Разблокируем кнопку
                addButton.disabled = false;
            }
        }

        // Предпросмотр изображений перед загрузкой
        function setupImagePreview() {
            const imageInput = document.getElementById('painting-images');
            const previewContainer = document.getElementById('image-preview');
            
            if (imageInput && previewContainer) {
                imageInput.addEventListener('change', function() {
                    previewContainer.innerHTML = '';
                    const statusDiv = document.getElementById('upload-status');
                    statusDiv.className = 'upload-status';
                    statusDiv.textContent = '';
                    
                    if (this.files && this.files.length > 0) {
                        for (let i = 0; i < this.files.length; i++) {
                            const file = this.files[i];
                            const reader = new FileReader();
                            
                            reader.onload = function(e) {
                                const img = document.createElement('img');
                                img.src = e.target.result;
                                img.className = 'preview-img';
                                previewContainer.appendChild(img);
                            }
                            
                            reader.readAsDataURL(file);
                        }
                        
                        statusDiv.textContent = `Выбрано ${this.files.length} изображений`;
                        statusDiv.className = 'upload-status success';
                    }
                });
            }
        }

        // Загрузить список картин для управления
        function loadPaintingsList() {
            const paintingsList = document.getElementById('paintings-list');
            if (!paintingsList) return;
            
            paintingsList.innerHTML = '<p>Загрузка списка картин...</p>';
            
            // В реальном приложении здесь бы загрузка из GitHub
            // Для демонстрации используем localStorage
            setTimeout(() => {
                paintingsList.innerHTML = '';
                
                if (galleryItems.length === 0) {
                    paintingsList.innerHTML = '<p>Картин пока нет</p>';
                    return;
                }
                
                galleryItems.forEach((item, index) => {
                    const paintingElement = document.createElement('div');
                    paintingElement.className = 'painting-item';
                    paintingElement.innerHTML = `
                        <h3>${item.title}</h3>
                        <p>Размер: ${item.size} | Цена: ${item.price}</p>
                        <p>Количество фото: ${item.images.length}</p>
                        <div style="margin-top: 10px;">
                            <button class="admin-btn" id="description-btn-list-${index}" style="background: #6f42c1; margin-right: 10px;">Описание картины</button>
                            <button class="delete-btn" data-index="${index}">Удалить</button>
                        </div>
                    `;
                    
                    paintingsList.appendChild(paintingElement);
                });
                
                // Добавляем обработчики для кнопок удаления
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        deletePainting(index);
                    });
                });
                
                // Добавляем обработчики для кнопок описания
                document.querySelectorAll('[id^="description-btn-list-"]').forEach(btn => {
                    btn.addEventListener('click', function() {
                        console.log('Кнопка описания нажата в списке картин');
                        const index = parseInt(this.id.replace('description-btn-list-', ''));
                        console.log('Индекс картины:', index);
                        console.log('Функция openDescriptionModal:', typeof window.openDescriptionModal);
                        if (typeof window.openDescriptionModal === 'function') {
                            openDescriptionModal(index);
                        } else {
                            console.error('Функция openDescriptionModal не найдена');
                        }
                    });
                });
            }, 500);
        }

        // Удалить картину
        async function deletePainting(index) {
            if (confirm('Вы уверены, что хотите удалить эту картину?')) {
                galleryItems.splice(index, 1);
                await saveGalleryDataComplete();
                loadPaintingsList();
                initGallery(); // Перезагружаем галерею
            }
        }

        // Сохранить данные галереи в localStorage
        function saveGalleryData() {
            localStorage.setItem('janart_gallery_data', JSON.stringify(galleryItems));
        }

        // Сохранить данные галереи (localStorage + GitHub)
        async function saveGalleryDataComplete() {
            saveGalleryData(); // Сохраняем в localStorage
            await saveGalleryDataToGitHub(); // Сохраняем в GitHub
        }

        // Сохранить данные галереи в GitHub
        async function saveGalleryDataToGitHub() {
            if (!GITHUB_CONFIG.token) {
                console.log('GitHub токен не настроен, сохраняем только локально');
                return;
            }

            try {
                const galleryData = {
                    paintings: galleryItems,
                    lastUpdated: new Date().toISOString(),
                    version: '1.0'
                };

                console.log('Сохраняем в GitHub galleryData:', galleryData);
                const content = JSON.stringify(galleryData, null, 2);
                const encodedContent = btoa(unescape(encodeURIComponent(content)));
                
                // Проверяем, существует ли файл
                const filePath = 'gallery-data.json';
                const existingFile = await getFileInfo(filePath);
                
                const requestData = {
                    message: `Update gallery data - ${new Date().toLocaleString()}`,
                    content: encodedContent
                };
                
                if (existingFile && existingFile.sha) {
                    requestData.sha = existingFile.sha;
                }
                
                const response = await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${filePath}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${GITHUB_CONFIG.token}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(requestData)
                });
                
                if (response.ok) {
                    console.log('Данные галереи сохранены в GitHub');
                } else {
                    console.error('Ошибка сохранения в GitHub:', response.status);
                }
            } catch (error) {
                console.error('Ошибка сохранения данных галереи в GitHub:', error);
            }
        }

        // Загрузить данные галереи из GitHub
        async function loadGalleryDataFromGitHub() {
            try {
                const filePath = 'gallery-data.json';
                const response = await fetch(`https://raw.githubusercontent.com/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/main/${filePath}`);
                
                if (response.ok) {
                    const data = await response.json();
                    console.log('Данные загружены из GitHub:', data);
                    if (data.paintings && Array.isArray(data.paintings)) {
                        galleryItems = data.paintings;
                        console.log('galleryItems после загрузки из GitHub:', galleryItems);
                        saveGalleryData(); // Сохраняем в localStorage для быстрого доступа
                        console.log('Данные галереи загружены из GitHub');
                        return true;
                    }
                }
            } catch (error) {
                console.error('Ошибка загрузки данных галереи из GitHub:', error);
            }
            
            return false;
        }

        // Загрузить данные галереи из localStorage
        function loadGalleryData() {
            const savedData = localStorage.getItem('janart_gallery_data');
            if (savedData) {
                return JSON.parse(savedData);
            }
            return null;
        }


        // Очистить данные в GitHub
        async function clearGitHubData() {
            try {
                // Удаляем файл gallery-data.json
                const filePath = 'gallery-data.json';
                const existingFile = await getFileInfo(filePath);
                
                if (existingFile && existingFile.sha) {
                    await fetch(`https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${filePath}`, {
                        method: 'DELETE',
                        headers: {
                            'Authorization': `token ${GITHUB_CONFIG.token}`,
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            message: 'Clear all gallery data',
                            sha: existingFile.sha
                        })
                    });
                }
                
                console.log('Данные в GitHub очищены');
            } catch (error) {
                console.error('Ошибка очистки данных в GitHub:', error);
            }
        }

        // Инициализация админ-панели
        function initAdminPanel() {
            // Проверяем URL при загрузке
            checkAdminURL();
            
            // Загружаем сохраненные настройки
            loadAdminSettings();
            
            // Настройка кнопки закрытия
            const adminCloseBtn = document.getElementById('admin-close');
            if (adminCloseBtn) {
                adminCloseBtn.addEventListener('click', function() {
                    document.getElementById('admin-panel').style.display = 'none';
                    window.location.hash = '';
                });
            }
            
            // Настройка кнопки сохранения настроек GitHub
            const saveGithubBtn = document.getElementById('save-github-config');
            if (saveGithubBtn) {
                saveGithubBtn.addEventListener('click', saveGithubConfig);
            }
            
            // Настройка кнопки проверки подключения
            const testConnectionBtn = document.getElementById('test-connection');
            if (testConnectionBtn) {
                testConnectionBtn.addEventListener('click', testGitHubConnection);
            }
            
            // Настройка кнопки сохранения настроек
            const saveSettingsBtn = document.getElementById('save-settings');
            if (saveSettingsBtn) {
                saveSettingsBtn.addEventListener('click', savePaintingsSettings);
            }
            
            // Настройка кнопки сохранения конфигурации фотографий
            const savePhotosConfigBtn = document.getElementById('save-photos-config');
            if (savePhotosConfigBtn) {
                savePhotosConfigBtn.addEventListener('click', function() {
                    alert('Конфигурация фотографий сохранена!');
                });
            }
            
            
            // Настройка предпросмотра изображений
            setupImagePreview();
            
            // Настройка кнопки добавления картины
            const addPaintingBtn = document.getElementById('add-painting');
            if (addPaintingBtn) {
                addPaintingBtn.addEventListener('click', addNewPainting);
            }
            
            // Загружаем сохраненные данные при инициализации
            const savedData = loadGalleryData();
            if (savedData) {
                galleryItems = savedData;
            }
        }

        // Загрузить настройки админ-панели
        function loadAdminSettings() {
            // Загружаем количество картин
            const savedPaintingsCount = localStorage.getItem('numberOfPaintings');
            if (savedPaintingsCount) {
                numberOfPaintings = parseInt(savedPaintingsCount);
                document.getElementById('paintings-count').value = numberOfPaintings;
            }
            
            // Генерируем конфигурацию фотографий
            generatePhotosConfig();
            
            // Генерируем конфигурацию порядка картин
            generatePaintingsOrderConfig();
        }

        // Генерировать конфигурацию порядка картин
        function generatePaintingsOrderConfig() {
            const container = document.getElementById('paintings-order-config');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Фильтруем картины, у которых есть фотографии
            const validPaintings = galleryItems.filter(item => item && item.images && item.images.length > 0);
            
            if (validPaintings.length === 0) {
                container.innerHTML = '<p>Нет картин с фотографиями для изменения порядка</p>';
                return;
            }
            
            validPaintings.forEach((painting, index) => {
                const paintingDiv = document.createElement('div');
                paintingDiv.style.cssText = 'display: flex; align-items: center; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; background: white;';
                
                paintingDiv.innerHTML = `
                    <input type="radio" name="painting-order" value="${galleryItems.indexOf(painting)}" style="margin-right: 15px;">
                    <img src="${painting.mainImage}" style="width: 60px; height: 60px; object-fit: cover; margin-right: 15px; border-radius: 4px;">
                    <div style="flex: 1;">
                        <div><strong>${painting.title}</strong></div>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">Фотографий: ${painting.images.length} | Позиция: ${index + 1}</div>
                    </div>
                `;
                
                container.appendChild(paintingDiv);
            });
        }

        // Переместить картину в списке (новая функция для кнопок у каждой картины)
        async function movePaintingInList(paintingIndex, direction) {
            const newIndex = direction === 'up' ? paintingIndex - 1 : paintingIndex + 1;
            
            // Проверяем границы
            if (newIndex < 0 || newIndex >= galleryItems.length) {
                return; // Не показываем ошибку, просто ничего не делаем
            }
            
            // Перемещаем картину
            const paintingToMove = galleryItems[paintingIndex];
            galleryItems.splice(paintingIndex, 1);
            galleryItems.splice(newIndex, 0, paintingToMove);
            
            // Сохраняем изменения
            await saveGalleryDataComplete();
            
            // Обновляем галерею
            initGallery();
            
            // Перезагружаем конфигурацию
            generatePhotosConfig();
            generatePaintingsOrderConfig();
        }

        // Переместить выбранную картину (старая функция для радиокнопок)
        async function moveSelectedPainting(direction) {
            // Получаем выбранную картину
            const selectedRadio = document.querySelector('input[name="painting-order"]:checked');
            if (!selectedRadio) {
                alert('Выберите картину для перемещения');
                return;
            }
            
            const selectedIndex = parseInt(selectedRadio.value);
            const newIndex = direction === 'up' ? selectedIndex - 1 : selectedIndex + 1;
            
            // Проверяем границы
            if (newIndex < 0 || newIndex >= galleryItems.length) {
                alert(`Нельзя переместить картину ${direction === 'up' ? 'вверх' : 'вниз'}`);
                return;
            }
            
            // Перемещаем картину
            const paintingToMove = galleryItems[selectedIndex];
            galleryItems.splice(selectedIndex, 1);
            galleryItems.splice(newIndex, 0, paintingToMove);
            
            // Сохраняем изменения
            await saveGalleryDataComplete();
            
            // Обновляем галерею
            initGallery();
            
            // Перезагружаем конфигурацию порядка
            generatePaintingsOrderConfig();
        }

        // ===== ОСНОВНАЯ ФУНКЦИОНАЛЬНОСТЬ САЙТА =====
        // (ваш существующий код остается без изменений)

        // Автоматическое создание данных для галереи
        async function initializeGalleryItems() {
            // Загружаем настройки из localStorage
            const savedPaintingsCount = localStorage.getItem('numberOfPaintings');
            if (savedPaintingsCount) {
                numberOfPaintings = parseInt(savedPaintingsCount);
            }
            
            // Сначала пытаемся загрузить из GitHub
            const loadedFromGitHub = await loadGalleryDataFromGitHub();
            
            if (loadedFromGitHub) {
                // Данные загружены из GitHub
                return;
            }
            
            // Если не удалось загрузить из GitHub, загружаем из localStorage
            const savedData = loadGalleryData();
            if (savedData && savedData.length > 0) {
                galleryItems = savedData;
                return;
            }
            
            // Данные по умолчанию
            galleryItems = Array.from({length: numberOfPaintings}, (_, i) => {
                const paintingNumber = i + 1;
                const images = Array.from({length: photosPerPainting}, (_, j) => {
                    const photoNumber = j + 1;
                    return `https://raw.githubusercontent.com/maksim92982/website/main/images/gallery/${paintingNumber}/${photoNumber}.JPG`;
                });
                
                return {
                    id: paintingNumber,
                    title: `Без названия, №${paintingNumber}`,
                    size: paintingNumber % 2 === 0 ? '36" x 48"' : '48" x 36"',
                    price: paintingNumber === 5 ? "2 160 ₽" : "3 450 ₽",
                    mainImage: images[0],
                    images: images,
                    soldOut: false,
                    description: "Акрил, мраморная пыль и пигмент на холсте, 2024"
                };
            });
            
            // Сохраняем данные по умолчанию
            saveGalleryData();
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', async function() {
            // Инициализируем данные галереи
            await initializeGalleryItems();
            
            // Инициализируем основное приложение
            initGallery();
            initNavigation();
            initForms();
            initContactsModal();
            
            // Инициализируем админ-панель
            initAdminPanel();
            
            // Инициализируем модальное окно описания после админ-панели
            initDescriptionModal();
            
            document.getElementById('main-hero').addEventListener('click', function() {
                showPage('gallery');
            });
            
            // Обработчик клика по логотипу
            document.getElementById('home-logo').addEventListener('click', function() {
                showPage('home');
            });
            
            // Обработчики клавиатуры для стрелок
            document.addEventListener('keydown', handleKeyPress);
        });



        // Инициализация галереи
        function initGallery() {
            const galleryContainer = document.querySelector('.gallery');
            if (!galleryContainer) return;
            
            // Очищаем контейнер перед добавлением новых элементов
            galleryContainer.innerHTML = '';
            
            // Фильтруем картины, у которых есть хотя бы одно изображение
            const validGalleryItems = galleryItems.filter(item => item && item.images && item.images.length > 0);
            
            if (validGalleryItems.length === 0) {
                galleryContainer.innerHTML = '<div class="gallery-empty">Галерея пуста. Добавьте картины в админ-панели.</div>';
                return;
            }
            
            validGalleryItems.forEach(item => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                galleryItem.innerHTML = `
                    <img src="${item.mainImage}" alt="${item.title}">
                    <div class="gallery-item-overlay">
                        <div class="product-title">${item.title}</div>
                        <div class="product-price">${item.price}</div>
                        <div class="product-photos-count">Фото: ${item.images.length}</div>
                    </div>
                    ${item.overlay && item.overlay.type !== 'none' ? `<div class="painting-overlay ${item.overlay.type}" style="background-color: ${item.overlay.color};">${item.overlay.text}</div>` : ''}
                `;
                
                galleryItem.addEventListener('click', function() {
                    showProduct(item);
                });
                
                galleryContainer.appendChild(galleryItem);
            });
        }

        // Обновление отображения галереи
        function updateGalleryDisplay() {
            initGallery();
        }

        // Инициализация навигации
        function initNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const page = this.getAttribute('data-page');
                    if (page) {
                        showPage(page);
                    }
                });
            });
            
            // Мобильная кнопка галереи
            const mobileGalleryLink = document.querySelector('.mobile-gallery-link');
            if (mobileGalleryLink) {
                mobileGalleryLink.addEventListener('click', function() {
                    showPage('gallery');
                });
            }
            
            // Мобильная кнопка "Об авторе" в футере
            const mobileBioLink = document.querySelector('.mobile-bio-link');
            if (mobileBioLink) {
                mobileBioLink.addEventListener('click', function() {
                    showPage('bio');
                });
            }
            
            // Мобильное меню
            const mobileMenu = document.querySelector('.mobile-menu');
            const mobileNav = document.querySelector('.mobile-nav');
            const closeMenu = document.querySelector('.close-menu');
            
            if (mobileMenu && mobileNav && closeMenu) {
                mobileMenu.addEventListener('click', function() {
                    mobileNav.classList.add('active');
                });
                
                closeMenu.addEventListener('click', function() {
                    mobileNav.classList.remove('active');
                });
                
                const mobileNavLinks = document.querySelectorAll('.mobile-nav .nav-link');
                mobileNavLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileNav.classList.remove('active');
                    });
                });
            }
        }

        // Инициализация модального окна контактов
        function initContactsModal() {
            const contactsLink = document.getElementById('contacts-link');
            const desktopContactsLink = document.getElementById('desktop-contacts-link');
            const mobileContactsLink = document.getElementById('mobile-contacts-link');
            const contactsModal = document.getElementById('contacts-modal');
            const closeContacts = document.getElementById('close-contacts');
            
            // Функция для обновления текста контактов в зависимости от устройства
            function updateContactsContent() {
                const isMobile = window.innerWidth <= 768;
                const contactItems = document.querySelectorAll('.contact-item');
                
                contactItems.forEach((item, index) => {
                    const link = item.querySelector('a');
                    if (link) {
                        if (isMobile) {
                            // Для мобильных устройств показываем только email полностью
                            if (index === 2) { // Email
                                link.textContent = 'tatiana.janart@gmail.com';
                            } else {
                                link.textContent = '';
                            }
                        } else {
                            // Для ПК показываем полную информацию
                            if (index === 0) { // Instagram
                                link.textContent = '@janart_studio';
                            } else if (index === 1) { // WhatsApp
                                link.textContent = '+7 (904) 606 81 07';
                            } else if (index === 2) { // Email
                                link.textContent = 'tatiana.janart@gmail.com';
                            }
                        }
                    }
                });
            }
            
            // Обновляем контакты при загрузке и изменении размера окна
            updateContactsContent();
            window.addEventListener('resize', updateContactsContent);
            
            if (contactsLink) {
                contactsLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    contactsModal.classList.add('active');
                });
            }
            
            if (desktopContactsLink) {
                desktopContactsLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    contactsModal.classList.add('active');
                });
            }
            
            if (mobileContactsLink) {
                mobileContactsLink.addEventListener('click', function(e) {
                    e.preventDefault();
                    contactsModal.classList.add('active');
                    // Закрываем мобильное меню после выбора пункта
                    const mobileNav = document.querySelector('.mobile-nav');
                    if (mobileNav) {
                        mobileNav.classList.remove('active');
                    }
                });
            }
            
            if (closeContacts) {
                closeContacts.addEventListener('click', function() {
                    contactsModal.classList.remove('active');
                });
            }
            
            if (contactsModal) {
                contactsModal.addEventListener('click', function(e) {
                    if (e.target === contactsModal) {
                        contactsModal.classList.remove('active');
                    }
                });
            }
        }

        // Инициализация модального окна редактирования описания картины
        function initDescriptionModal() {
            console.log('=== Инициализация модального окна описания ===');
            const descriptionModal = document.getElementById('description-modal');
            const closeDescription = document.getElementById('close-description');
            const saveDescription = document.getElementById('save-description');
            const cancelDescription = document.getElementById('cancel-description');
            
            console.log('Элементы модального окна:', {
                descriptionModal,
                closeDescription,
                saveDescription,
                cancelDescription
            });
            const shapeRadios = document.querySelectorAll('input[name="shape-type"]');
            const overlaySettings = document.getElementById('overlay-settings');
            const colorPresets = document.querySelectorAll('.color-preset');
            const colorInput = document.getElementById('overlay-color');
            
            let currentPaintingIndex = null;
            
            // Обработчик изменения формы таблички
            shapeRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === 'none') {
                        overlaySettings.style.display = 'none';
                    } else {
                        overlaySettings.style.display = 'block';
                    }
                });
            });
            
            // Обработчики для цветовых пресетов
            colorPresets.forEach(preset => {
                preset.addEventListener('click', function() {
                    const color = this.getAttribute('data-color');
                    colorInput.value = color;
                    
                    // Убираем активный класс с всех пресетов
                    colorPresets.forEach(p => p.classList.remove('active'));
                    // Добавляем активный класс к выбранному
                    this.classList.add('active');
                });
            });
            
            // Обработчик изменения цвета через input
            colorInput.addEventListener('change', function() {
                // Убираем активный класс с всех пресетов
                colorPresets.forEach(p => p.classList.remove('active'));
            });
            
            // Функция открытия модального окна
            window.openDescriptionModal = function(paintingIndex) {
                console.log('=== openDescriptionModal вызвана ===');
                console.log('Индекс картины:', paintingIndex);
                console.log('galleryItems:', galleryItems);
                currentPaintingIndex = paintingIndex;
                const painting = galleryItems[paintingIndex];
                console.log('Картина найдена:', painting);
                
                if (painting) {
                    document.getElementById('painting-title').value = painting.title || '';
                    document.getElementById('painting-price').value = painting.price || '';
                    document.getElementById('painting-size').value = painting.size || '';
                    document.getElementById('painting-description').value = painting.description || '';
                    
                    // Устанавливаем значения для таблички
                    const overlayData = painting.overlay || { type: 'none', text: '', color: '#ff6b6b' };
                    document.querySelector(`input[name="shape-type"][value="${overlayData.type}"]`).checked = true;
                    document.getElementById('overlay-text').value = overlayData.text || '';
                    document.getElementById('overlay-color').value = overlayData.color || '#ff6b6b';
                    
                    // Показываем/скрываем настройки таблички
                    if (overlayData.type === 'none') {
                        overlaySettings.style.display = 'none';
                    } else {
                        overlaySettings.style.display = 'block';
                    }
                }
                
                console.log('Модальное окно найдено:', descriptionModal);
                if (descriptionModal) {
                    descriptionModal.classList.add('active');
                    console.log('Модальное окно активировано');
                } else {
                    console.error('Модальное окно не найдено!');
                }
                console.log('=== Конец openDescriptionModal ===');
            };
            
            // Обработчики кнопок
            if (closeDescription) {
                closeDescription.addEventListener('click', function() {
                    descriptionModal.classList.remove('active');
                });
            }
            
            if (cancelDescription) {
                cancelDescription.addEventListener('click', function() {
                    descriptionModal.classList.remove('active');
                });
            }
            
            if (saveDescription) {
                saveDescription.addEventListener('click', function() {
                    console.log('=== Сохранение описания картины ===');
                    if (currentPaintingIndex !== null) {
                        const painting = galleryItems[currentPaintingIndex];
                        console.log('Картина до изменения:', painting);
                        
                        // Обновляем данные картины
                        painting.title = document.getElementById('painting-title').value;
                        painting.price = document.getElementById('painting-price').value;
                        painting.size = document.getElementById('painting-size').value;
                        painting.description = document.getElementById('painting-description').value;
                        
                        // Обновляем данные таблички
                        const selectedShape = document.querySelector('input[name="shape-type"]:checked').value;
                        painting.overlay = {
                            type: selectedShape,
                            text: document.getElementById('overlay-text').value,
                            color: document.getElementById('overlay-color').value
                        };
                        
                        console.log('Картина после изменения:', painting);
                        
                        // Сохраняем в localStorage
                        localStorage.setItem('galleryItems', JSON.stringify(galleryItems));
                        console.log('Данные сохранены в localStorage');
                        
                        // Сохраняем в GitHub
                        saveGalleryDataToGitHub().then(() => {
                            console.log('Данные сохранены в GitHub');
                        }).catch(error => {
                            console.error('Ошибка сохранения в GitHub:', error);
                        });
                        
                        // Обновляем отображение
                        updateGalleryDisplay();
                        loadPaintingsList();
                        
                        descriptionModal.classList.remove('active');
                        console.log('=== Конец сохранения ===');
                    }
                });
            }
            
            // Закрытие по клику вне модального окна
            if (descriptionModal) {
                descriptionModal.addEventListener('click', function(e) {
                    if (e.target === descriptionModal) {
                        descriptionModal.classList.remove('active');
                    }
                });
            }
        }

        // Инициализация форм
        function initForms() {
            const contactForm = document.querySelector('.contact-form');
            if (contactForm) {
                contactForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('Сообщение отправлено! Я свяжусь с вами в ближайшее время.');
                    contactForm.reset();
                });
            }
        }

        // Показать страницу
        function showPage(pageId) {
            // Скрываем все возможные страницы
            const allPages = document.querySelectorAll('.page, .product-page, .bio-page, .contact-page');
            allPages.forEach(page => {
                page.style.display = 'none';
            });
            
            // Показываем нужную страницу
            const targetPage = document.getElementById(`${pageId}-page`);
            if (targetPage) {
                targetPage.style.display = 'block';
            }
            
            // Всегда прокручиваем наверх
            window.scrollTo(0, 0);
        }

        // Показать страницу товара
        function showProduct(product) {
            currentProduct = product;
            currentImageIndex = 0;
            const productPage = document.getElementById('product-page');
            
            productPage.innerHTML = `
                <div class="back-button" id="back-to-gallery">← Назад в галерею</div>
                <div class="product-container">
                    <div class="product-gallery">
                        <div class="product-thumbnails" id="thumbnailsContainer">
                            ${product.images.map((image, index) => `
                                <div class="product-thumbnail ${index === 0 ? 'active' : ''}" data-image="${image}" data-index="${index}">
                                    <img src="${image}" alt="Миниатюра ${index + 1}">
                                    ${product.overlay && product.overlay.type !== 'none' ? `<div class="painting-overlay ${product.overlay.type}" style="background-color: ${product.overlay.color};">${product.overlay.text}</div>` : ''}
                                </div>
                            `).join('')}
                        </div>
                        <div class="product-image-main" id="product-image-container">
                            <img src="${product.images[0]}" alt="${product.title}" id="main-product-image">
                            <button class="nav-arrow prev" id="prev-arrow"></button>
                            <button class="nav-arrow next" id="next-arrow"></button>
                            ${product.overlay && product.overlay.type !== 'none' ? `<div class="painting-overlay ${product.overlay.type}" style="background-color: ${product.overlay.color};">${product.overlay.text}</div>` : ''}
                        </div>
                    </div>
                    <div class="product-details">
                        <h1 class="product-title">${product.title}</h1>
                        <div class="product-price">${product.price}</div>
                        <div class="product-size">${product.size}</div>
                        <div class="product-description">
                            <p>${product.description}</p>
                            <p>Картина поставляется без рамы.</p>
                        </div>
                        <button class="add-to-cart">Добавить в корзину</button>
                    </div>
                </div>
            `;
            
            initThumbnails(product);
            initSwipeNavigation();
            initArrowNavigation();
            
            document.getElementById('back-to-gallery').addEventListener('click', function() {
                showPage('gallery');
            });
            
            const addToCartBtn = document.querySelector('.add-to-cart');
            if (addToCartBtn) {
                addToCartBtn.addEventListener('click', function() {
                    alert('Товар добавлен в корзину!');
                });
            }
            
            showPage('product');
        }

        // Инициализация миниатюр
        function initThumbnails(product) {
            const thumbnails = document.querySelectorAll('.product-thumbnail');
            thumbnails.forEach(thumbnail => {
                thumbnail.addEventListener('click', function() {
                    thumbnails.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    const mainImage = document.getElementById('main-product-image');
                    mainImage.src = this.getAttribute('data-image');
                    currentImageIndex = parseInt(this.getAttribute('data-index'));
                    
                    mainImage.style.maxWidth = '100%';
                    mainImage.style.maxHeight = '65vh';
                    mainImage.style.width = 'auto';
                    mainImage.style.height = 'auto';
                    mainImage.style.objectFit = 'contain';
                    
                    // Обновляем табличку при переключении изображений
                    const overlayContainer = document.querySelector('#product-image-container .painting-overlay');
                    if (overlayContainer) {
                        overlayContainer.remove();
                    }
                    if (product.overlay && product.overlay.type !== 'none') {
                        const overlay = document.createElement('div');
                        overlay.className = `painting-overlay ${product.overlay.type}`;
                        overlay.style.backgroundColor = product.overlay.color;
                        overlay.textContent = product.overlay.text;
                        document.getElementById('product-image-container').appendChild(overlay);
                    }
                });
            });
        }

        // Инициализация свайп-навигации
        function initSwipeNavigation() {
            const imageContainer = document.getElementById('product-image-container');
            const mainImage = document.getElementById('main-product-image');
            
            if (!imageContainer || !mainImage) return;
            
            imageContainer.addEventListener('touchstart', function(e) {
                touchStartX = e.changedTouches[0].screenX;
            });
            
            imageContainer.addEventListener('touchend', function(e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });
        }

        // Инициализация навигации стрелками
        function initArrowNavigation() {
            const prevArrow = document.getElementById('prev-arrow');
            const nextArrow = document.getElementById('next-arrow');
            
            if (prevArrow) {
                prevArrow.addEventListener('click', showPreviousImage);
            }
            
            if (nextArrow) {
                nextArrow.addEventListener('click', showNextImage);
            }
        }

        // Обработка нажатий клавиш
        function handleKeyPress(e) {
            if (document.getElementById('product-page').style.display === 'block') {
                if (e.key === 'ArrowLeft') {
                    showPreviousImage();
                } else if (e.key === 'ArrowRight') {
                    showNextImage();
                }
            }
        }

        // Обработка свайпов
        function handleSwipe() {
            const minSwipeDistance = 50;
            
            if (!touchStartX || !touchEndX) return;
            
            const distance = touchStartX - touchEndX;
                        if (Math.abs(distance) < minSwipeDistance) return;
            
            if (distance > 0) {
                // Свайп влево - следующее изображение
                showNextImage();
            } else {
                // Свайп вправо - предыдущее изображение
                showPreviousImage();
            }
            
            // Сброс значений
            touchStartX = null;
            touchEndX = null;
        }

        // Показать предыдущее изображение
        function showPreviousImage() {
            if (!currentProduct) return;
            
            currentImageIndex--;
            if (currentImageIndex < 0) {
                currentImageIndex = currentProduct.images.length - 1;
            }
            
            updateMainImage();
        }

        // Показать следующее изображение
        function showNextImage() {
            if (!currentProduct) return;
            
            currentImageIndex++;
            if (currentImageIndex >= currentProduct.images.length) {
                currentImageIndex = 0;
            }
            
            updateMainImage();
        }

        // Обновить главное изображение
        function updateMainImage() {
            const mainImage = document.getElementById('main-product-image');
            const thumbnails = document.querySelectorAll('.product-thumbnail');
            
            if (mainImage && currentProduct) {
                mainImage.src = currentProduct.images[currentImageIndex];
                
                // Обновляем активную миниатюру
                thumbnails.forEach((thumbnail, index) => {
                    if (index === currentImageIndex) {
                        thumbnail.classList.add('active');
                    } else {
                        thumbnail.classList.remove('active');
                    }
                });
                
                // Прокручиваем миниатюры к активной
                const activeThumbnail = thumbnails[currentImageIndex];
                if (activeThumbnail) {
                    activeThumbnail.scrollIntoView({
                        behavior: 'smooth',
                        block: 'nearest',
                        inline: 'center'
                    });
                }
                
                // Обновляем табличку при переключении изображений
                const overlayContainer = document.querySelector('#product-image-container .painting-overlay');
                if (overlayContainer) {
                    overlayContainer.remove();
                }
                if (currentProduct.overlay && currentProduct.overlay.type !== 'none') {
                    const overlay = document.createElement('div');
                    overlay.className = `painting-overlay ${currentProduct.overlay.type}`;
                    overlay.style.backgroundColor = currentProduct.overlay.color;
                    overlay.textContent = currentProduct.overlay.text;
                    document.getElementById('product-image-container').appendChild(overlay);
                }
            }
        }
    </script>
</body>
</html>
